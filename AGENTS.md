# AI エージェント向け作業方針

## 目的

このドキュメントは、一般的な AI エージェントがこのプロジェクトで作業する際の基本方針を定義します。

## 基本方針

- **会話言語**: 日本語
- **コード内コメント**: 日本語 (JSDoc など)
- **エラーメッセージ**: 英語
- **日本語と英数字の間**: 半角スペースを挿入
- **コミットメッセージ**: [Conventional Commits](https://www.conventionalcommits.org/en/v1.0.0/) に従い、`<description>` は日本語で記載
- **ブランチ命名**: [Conventional Branch](https://conventional-branch.github.io) に従い、`<type>` は短縮形 (feat, fix, docs など) を使用

## プロジェクト概要

- プロジェクト名: @book000/node-utils
- 目的: TypeScript による個人向けユーティリティライブラリの開発
- 主な機能:
  - **Logger**: Winston ベースのロガーラッパークラス (日本のタイムゾーン対応)
  - **ConfigFramework**: JSONC 形式の設定ファイル管理フレームワーク (バリデーション機能付き)
  - **Discord**: Discord Bot / Webhook を使用したメッセージ送信ユーティリティ

## 技術スタック

- 言語: TypeScript 5.9.3
- ランタイム: Node.js v24.13.0
- パッケージマネージャー: pnpm 10.28.1 (必須)
- テストフレームワーク: Jest 30.2.0 + ts-jest 29.4.6

## 判断記録のルール

重要な判断を行う際は、以下の形式で記録すること:

1. **判断内容の要約**: 何を決定したか
2. **検討した代替案**: 他にどのような選択肢があったか
3. **採用しなかった案とその理由**: なぜその案を選ばなかったか
4. **前提条件・仮定・不確実性**: どのような前提に基づいているか、何が不確実か

**重要**: 前提・仮定・不確実性を明示すること。仮定を事実のように扱ってはなりません。

## 開発手順

### 1. プロジェクト理解

- `README.md` を読み、プロジェクトの目的と主な機能を理解する
- `package.json` を確認し、技術スタックと開発コマンドを把握する
- `src/` ディレクトリの構造を確認し、主要なファイルを把握する

### 2. 依存関係インストール

```bash
pnpm install
```

**重要**: 必ず pnpm を使用すること。npm や yarn は使用しない。

### 3. 変更実装

- 既存のコーディング規約に従う
- 関数・インターフェースには JSDoc コメントを日本語で記載する
- エラーメッセージは英語で記載する
- `skipLibCheck` での回避は禁止

### 4. テストと Lint/Format 実行

```bash
# テスト実行
pnpm test

# リント実行
pnpm lint

# 自動修正
pnpm fix
```

## セキュリティ / 機密情報

- API キーや認証情報を Git にコミットしない
- 環境変数を使用して機密情報を管理する
- ログに個人情報や認証情報を出力しない

## リポジトリ固有

- ctix により `src/index.ts` が自動生成される。手動編集は禁止。
- `src/examples/**` は Index ファイル生成対象外。
- Renovate による自動依存更新が有効。Renovate が作成した既存の PR に対して追加コミットや更新を行わない。
- 発行前に `npm run lint` が自動実行される。
- npm install 後に `npm run build` が自動実行される。
